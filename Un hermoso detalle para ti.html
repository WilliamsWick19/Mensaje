<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rosa para Valeria</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&family=Dancing+Script:wght@700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            height: 100vh;
            width: 100%;
            background: #0f0c29;
            background: linear-gradient(135deg, #24243e, #302b63, #0f0c29);
            overflow: hidden;
            font-family: 'Montserrat', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #fff;
            animation: twinkle var(--duration) linear infinite;
        }
        
        @keyframes twinkle {
            0%, 100% {
                opacity: 0.2;
            }
            50% {
                opacity: 1;
            }
        }
        
        .message-container {
            position: absolute;
            top: 5%;
            
            transform: translateX(-50%);
            z-index: 10;
            text-align: center;
            width: 90%;
            max-width: 800px;
            max-height: 80vh; /* Limitar la altura máxima */
            perspective: 1500px;
            backdrop-filter: blur(3px);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3), inset 0 2px 10px rgba(255, 255, 255, 0.1);
            background: rgba(36, 36, 62, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow-y: auto; /* Permitir scroll vertical */
            overflow-x: hidden; /* Ocultar scroll horizontal */
            display: none;
            opacity: 0;
            transition: opacity 1.5s ease;
        }

        /* Estilos personalizados para la barra de scroll */
        .message-container::-webkit-scrollbar {
            width: 8px;
        }

        .message-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .message-container::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #ff69b4, #ffc0cb);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(255, 105, 180, 0.5);
        }

        .message-container::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, #ff1493, #ff69b4);
        }

        /* Estilos para el botón de sobre */
        .envelope-button {
            position: absolute;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            cursor: pointer;
            perspective: 1000px;
            transition: transform 0.3s ease;
        }

        .envelope-button:hover {
            transform: translate(-50%, -50%) scale(1.05);
        }

        .envelope {
            position: relative;
            width: 150px;
            height: 100px;
            transform-style: preserve-3d;
            transform: rotateX(0deg);
            transition: transform 0.5s ease;
        }

        .envelope:hover {
            transform: rotateX(10deg) translateY(-10px);
        }

        .envelope-front, .envelope-back {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffb6c1, #ff69b4);
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .envelope-front {
            transform: translateZ(1px);
            clip-path: polygon(0 0, 100% 0, 100% 75%, 50% 100%, 0 75%);
            background: linear-gradient(135deg, #ff8da1, #ff5b94);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .envelope-back {
            transform: translateZ(0);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .envelope-back:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 0;
            padding-bottom: 50%;
            background: linear-gradient(135deg, #ff8da1, #ff5b94);
            clip-path: polygon(0 0, 50% 50%, 100% 0);
            transform-origin: top;
            transition: transform 0.5s ease;
        }

        .envelope:hover .envelope-back:before {
            transform: rotateX(-20deg);
        }

        .letter {
            position: absolute;
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            background: white;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            color: #ff5b94;
            text-shadow: 0 0 5px rgba(255, 91, 148, 0.5);
            transform: translateZ(0.5px);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.5s ease;
        }

        .envelope:hover .letter {
            transform: translateZ(10px) translateY(-20px);
        }

        /* Añadir animación para cuando el sobre se abre */
        @keyframes openEnvelope {
            0% {
                transform: translate(-50%, -50%) scale(1) rotateX(0);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2) rotateX(30deg);
            }
            100% {
                transform: translate(-50%, -50%) scale(0) rotateX(90deg);
                opacity: 0;
            }
        }

        .envelope-opening {
            animation: openEnvelope 1.5s forwards;
        }

        /* Animación para mostrar el mensaje */
        @keyframes showMessage {
            0% {
                opacity: 0;
                transform: translateY(-50px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 192, 203, 0.05) 0%, rgba(255, 192, 203, 0) 70%);
            transform: rotate(30deg);
            animation: shimmerEffect 15s linear infinite;
            pointer-events: none;
        }

        @keyframes shimmerEffect {
            0% { transform: rotate(0deg) translateY(0%); opacity: 0.1; }
            25% { opacity: 0.3; }
            50% { transform: rotate(180deg) translateY(-20%); opacity: 0.1; }
            75% { opacity: 0.3; }
            100% { transform: rotate(360deg) translateY(0%); opacity: 0.1; }
        }
        
        .message {
            font-family: 'Dancing Script', cursive;
            color: transparent;
            font-size: 3.5rem;
            background-image: linear-gradient(135deg, #FFD700, #FFC0CB, #E6E6FA, #87CEEB);
            background-size: 400% 400%;
            background-clip: text;
            -webkit-background-clip: text;
            text-shadow: 0 10px 30px rgba(255, 255, 255, 0.3);
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.5));
            letter-spacing: 2px;
            margin-bottom: 2rem;
            position: relative;
            
            /* La animación inicial será solo opacity y transform */
            opacity: 0;
            transform: translateY(-20px) rotateX(20deg);
            transition: opacity 1.5s ease, transform 1.5s ease;
        }

        /* Clase para añadir cuando el título sea visible */
        .message.visible {
            opacity: 1;
            transform: translateY(0) rotateX(0);
            /* Añadir las animaciones originales cuando sea visible */
            animation: gradientShift 8s ease infinite, 
                    floatText 6s ease-in-out infinite;
        }
        
        @keyframes floatText {
            0% { transform: translateY(0) rotateX(0); }
            50% { transform: translateY(-10px) rotateX(5deg); }
            100% { transform: translateY(0) rotateX(0); }
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes textFocus {
            0% {
                opacity: 0;
                transform: translateY(-20px) rotateX(20deg);
                filter: blur(10px);
            }
            100% {
                opacity: 1;
                transform: translateY(0) rotateX(0);
                filter: blur(0);
            }
        }
        
        .sub-message {
            position: relative;
            font-family: 'Montserrat', sans-serif;
            color: #ffffff;
            font-size: 1.1rem;
            max-width: 100%;
            margin: 0 auto 20px auto; /* Añadir margen inferior */
            line-height: 1.8;
            opacity: 0;
            animation: fadeInWord 0.5s ease-out forwards;
            animation-delay: calc(var(--word-index) * 0.1s + 3s);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
            overflow: visible;
            padding: 15px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            box-shadow: inset 0 0 15px rgba(255, 255, 255, 0.05);
            text-align: left; /* Cambiar a alineación izquierda para mejor lectura */
        }
        
        .sub-message::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(255, 192, 203, 0.6), transparent);
            animation: lineGlow 6s ease-in-out infinite 6s;
        }
        
        @keyframes lineGlow {
            0% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        @keyframes fadeInWord {
            to {
                opacity: 1;
            }
        }
        
        .highlight-word {
            display: inline-block;
            position: relative;
            color: #ffffff;
            font-weight: 700;
            padding: 0 5px;
            margin: 0 -5px;
            opacity: 0;
            filter: blur(4px);
            transform: translateY(10px);
            transition: transform 0.5s ease, color 0.5s ease, opacity 0.5s ease, filter 0.5s ease;
        }
        
        .highlight-word.visible {
            opacity: 1;
            filter: blur(0);
            transform: translateY(0);
        }

        .highlight-word::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(135deg, rgba(255, 192, 203, 0.4), rgba(255, 215, 0, 0.2));
            z-index: -1;
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s ease-out;
        }

        .highlight-word.visible::before {
            transform: scaleX(1);
            transition-delay: 0.1s;
        }

        .highlight-word:hover {
            transform: scale(1.1);
            color: #FFD700;
        }
        
        @keyframes highlightWord {
            to {
                transform: scaleX(1);
            }
        }

        /* Efecto de corazones con el mouse */
        .heart {
            position: fixed;
            font-size: 20px;
            color: rgba(255, 105, 180, 0.8);
            user-select: none;
            pointer-events: none;
            z-index: 1000;
            animation: floatHeart 3s ease-in-out forwards;
            text-shadow: 0 0 10px rgba(255, 105, 180, 0.5);
            opacity: 0;
        }

        @keyframes floatHeart {
            0% {
                transform: translateY(0) scale(0.5);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100px) scale(1.5) rotate(20deg);
                opacity: 0;
            }
        }
        
        .message-glow {
            position: absolute;
            top: -50px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
            opacity: 0;
            animation: messageGlow 8s ease-in-out infinite 3s;
            pointer-events: none;
            z-index: -1;
        }
        
        @keyframes messageGlow {
            0% { opacity: 0; transform: translateX(-50%) scale(0.8); }
            50% { opacity: 0.5; transform: translateX(-50%) scale(1.2); }
            100% { opacity: 0; transform: translateX(-50%) scale(0.8); }
        }
        
        .card {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1;
        }
        
        .container {
            width: 100px;
            height: 300px;
            position: relative;
            margin-top: 25%;
            transform: scale(0.8);
            z-index: 2;
            filter: drop-shadow(0 0 20px rgba(255, 192, 203, 0.4));
        }
        
        .container div {
            position: absolute;
        }
        
        .container .glass {
            height: 420px;
            width: 250px;
            border: 3px solid rgba(255, 255, 255, 0.7);
            border-radius: 300px 300px 0px 0px;
            left: -80px;
            top: -100px;
            border-bottom: 15px solid rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), inset 0 0 30px rgba(255, 255, 255, 0.2);
            animation: glowing-dome 3s ease-in-out infinite alternate;
            overflow: hidden;
        }

        .container .glass:after {
            width: 8px;
            background: rgba(255, 255, 255, 0.4);
            content: '';
            position: absolute;
            height: 80px;
            border-radius: 100px;
            left: 10px;
            top: 180px;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.6);
        }
        
        .container .glass:before {
            width: 8px;
            background: rgba(255, 255, 255, 0.4);
            content: '';
            position: absolute;
            height: 15px;
            border-radius: 100px;
            left: 10px;
            top: 280px;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.6);
        }
        
        .droplets {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        
        .droplet {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            top: 10px;
            opacity: 0;
            animation: droplet 4s linear infinite;
        }
        
        @keyframes droplet {
            0% {
                opacity: 0;
                transform: translateY(0) scale(1);
            }
            10% {
                opacity: 1;
            }
            70% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(300px) scale(0);
            }
        }
        
        @keyframes glowing-dome {
            0% {
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), inset 0 0 30px rgba(255, 255, 255, 0.2);
            }
            100% {
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), inset 0 0 60px rgba(255, 192, 203, 0.4);
            }
        }
        
        .container .glow {
            position: absolute;
            width: 170px;
            height: 170px;
            border-radius: 100%;
            border: 1px solid rgba(245, 148, 184, 0.6);
            box-shadow: 0px 0px 30px #f594b8;
            left: -40px;
            top: -40px;
            transition: all 0.5s ease;
            animation: glowing 4s ease-in-out infinite alternate;
            z-index: 1;
        }
        
        .container .rose-petals > div {
            background: #d52d58;
            width: 45px;
            height: 80px;
            position: absolute;
            transition: all 0.5s ease-out;
            filter: drop-shadow(0 0 5px rgba(213, 45, 88, 0.5));
        }
        
        .container .rose-petals > div:nth-child(1) {
            border-radius: 15px;
            left: 20px;
            top: -6px;
            background: #d52d58;
            z-index: 10;
            animation: pulse 4s ease-in-out infinite alternate;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            100% {
                transform: scale(1.05);
            }
        }
        
        .container .rose-petals > div:nth-child(2),
        .container .rose-petals > div:nth-child(4),
        .container .rose-petals > div:nth-child(6) {
            border-radius: 0px 30px 0px 30px;
            background: #b81b43;
            left: 0;
            transform-origin: bottom right;
        }
        
        .container .rose-petals > div:nth-child(3),
        .container .rose-petals > div:nth-child(5),
        .container .rose-petals > div:nth-child(7) {
            border-radius: 30px 0px 30px 0px;
            left: 40px;
            transform-origin: bottom left;
        }
        
        .container .rose-petals > div:nth-child(2) {
            animation: openRose2 3s ease-in-out;
            animation-fill-mode: forwards;
            z-index: 5;
            background: linear-gradient(135deg, #9e183a, #d52d58);
            top: 10px;
            height: 70px;
            animation-delay: 2s;
        }
        
        .container .rose-petals > div:nth-child(3) {
            animation: openRose3 3s ease-in-out;
            animation-fill-mode: forwards;
            z-index: 4;
            background: linear-gradient(135deg, #9e183a, #d52d58);
            top: 10px;
            height: 70px;
            animation-delay: 2s;
        }
        
        .container .rose-petals > div:nth-child(4) {
            animation: openRose4 3s ease-in-out;
            animation-fill-mode: forwards;
            z-index: 3;
            background: linear-gradient(135deg, #b81b43, #e83e69);
            top: 5px;
            height: 75px;
            animation-delay: 2s;
        }
        
        .container .rose-petals > div:nth-child(5) {
            animation: openRose5 3s ease-in-out;
            animation-fill-mode: forwards;
            z-index: 2;
            background: linear-gradient(135deg, #b81b43, #e83e69);
            top: 5px;
            height: 75px;
            animation-delay: 2s;
        }
        
        .container .rose-petals > div:nth-child(6) {
            animation: openRose6 3s ease-in-out;
            animation-fill-mode: forwards;
            z-index: 1;
            background: linear-gradient(135deg, #c9204b, #e83e69);
            top: 0;
            height: 80px;
            animation-delay: 2s;
        }
        
        .container .rose-petals > div:nth-child(7) {
            animation: openRose7 3s ease-in-out;
            animation-fill-mode: forwards;
            z-index: 0;
            background: linear-gradient(135deg, #c9204b, #e83e69);
            top: 0;
            height: 80px;
            animation-delay: 2s;
        }
        
        .container .rose-leaves > div:nth-last-child(1) {
            width: 55px;
            height: 30px;
            background: linear-gradient(to bottom, #33a237, #066406);
            position: absolute;
            top: 60px;
            left: 15px;
            border-radius: 100px;
            box-shadow: 0 0 5px rgba(51, 143, 55, 0.5);
        }
        
        .container .rose-leaves > div:nth-child(1) {
            width: 6px;
            height: 230px;
            border: none;
            top: 80px;
            background: linear-gradient(to bottom, #33a237, #066406);
            left: 40px;
            box-shadow: 0 0 5px rgba(6, 100, 6, 0.5);
        }
        
        .container .thorns > div {
            width: 8px;
            height: 14px;
            background: #066406;
            top: 100px;
            left: 34px;
            transform: rotate(45deg);
            clip-path: polygon(0 0, 100% 50%, 0 100%);
            z-index: 3;
        }
        
        .container .thorns > div:nth-child(2) {
            top: 150px;
            left: 34px;
            transform: rotate(-135deg);
        }
        
        .container .thorns > div:nth-child(3) {
            top: 180px;
            left: 34px;
            transform: rotate(45deg);
        }
        
        .container .thorns > div:nth-child(4) {
            top: 220px;
            left: 34px;
            transform: rotate(-135deg);
        }
        
        .container .thorns > div:nth-child(2) {
            top: 150px;
            transform: rotate(180deg);
            left: 45px;
        }
        
        .container .thorns > div:nth-child(3) {
            top: 180px;
        }
        
        .container .thorns > div:nth-child(4) {
            top: 220px;
            transform: rotate(180deg);
            left: 45px;
        }
        
        .container .sparkles {
            bottom: -40px;
            z-index: 5;
        }
        
        .container .sparkles > div {
            width: 4px;
            height: 4px;
            border-radius: 100px;
            background: #ff96c0;
            box-shadow: 0px 0px 12px 2px #ff4e85;
            bottom: 0;
            opacity: 0;
            animation: sparkle 4s ease-in-out infinite;
        }
        
        .container .sparkles > div:nth-child(1) {
            left: 60px;
            animation-delay: 3s;
        }
        
        .container .sparkles > div:nth-child(2) {
            left: 158px;
            animation-delay: 2s;
        }
        
        .container .sparkles > div:nth-child(3) {
            left: -22px;
            animation-delay: 1s;
        }
        
        .container .sparkles > div:nth-child(4) {
            left: 10px;
            animation-delay: 1s;
        }
        
        .container .sparkles > div:nth-child(5) {
            left: 177px;
            animation-delay: 3s;
        }
        
        .container .sparkles > div:nth-child(6) {
            left: -82px;
            animation-delay: 2s;
        }
        
        .container .sparkles > div:nth-child(7) {
            left: 45px;
            animation-delay: 3s;
        }
        
        .container .sparkles > div:nth-child(8) {
            left: 74px;
            animation-delay: 3s;
        }
        
        .container .sparkles > div:nth-child(9) {
            left: -79px;
            animation-delay: 2s;
        }

        .floating-particle {
            position: absolute;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 215, 235, 0.6);
            opacity: 0;
            animation: floatParticle 15s ease-in-out infinite;
            pointer-events: none;
            z-index: 4;
        }

        @keyframes floatParticle {
            0% {
                transform: translate(-100px, 100px);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            40% {
                transform: translate(150px, -50px);
            }
            60% {
                transform: translate(100px, 100px);
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translate(-100px, 100px);
                opacity: 0;
            }
        }
        
        @keyframes sparkle {
            50% {
                opacity: 1;
            }
            100% {
                bottom: 250px;
            }
        }
        
        @keyframes openRose2 {
            50% {
                transform: rotate(-90deg);
                top: 80px;
                left: 100px;
            }
            100% {
                transform: rotate(-60deg);
                top: 210px;
                left: -30px;
            }
        }
        
        @keyframes openRose3 {
            100% {
                transform: rotate(60deg);
                top: 210px;
                left: 100px;
            }
        }
        
        @keyframes openRose4 {
            100% {
                transform: rotate(-30deg);
            }
        }
        
        @keyframes openRose5 {
            100% {
                transform: rotate(30deg);
            }
        }
        
        @keyframes openRose6 {
            100% {
                transform: rotate(-15deg);
            }
        }
        
        @keyframes openRose7 {
            100% {
                transform: rotate(15deg);
            }
        }
        
        @keyframes glowing {
            0% {
                box-shadow: 0px 0px 30px #f594b8;
                transform: scale(1);
            }
            50% {
                box-shadow: 0px 0px 60px #f594b8;
                transform: scale(1.1);
            }
            100% {
                box-shadow: 0px 0px 30px #f594b8;
                transform: scale(1);
            }
        }
        
        .signature {
            position: absolute;
            bottom: 20px;
            right: 20px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            font-family: 'Montserrat', sans-serif;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {

            .message-container {
                width: 95%;
                max-height: 75vh;
                padding: 15px;
            }
            .message {
                font-size: 2rem;
                padding: 0 10px;
            }
            
            .sub-message {
                font-size: 1rem;
                padding: 0 20px;
            }
            
            .container {
                transform: scale(0.7);
                margin-top: 20%;
            }
        }

        @media (max-width: 480px) {
            .message-container {
                width: 98%;
                max-height: 70vh;
                padding: 10px;
            }
            .message {
                font-size: 1.6rem;
            }
            
            .sub-message {
                font-size: 0.9rem;
            }
            
            .container {
                transform: scale(0.6);
                margin-top: 70%;
            }
        }

        /* Estilos para la animación de palabras */
        .word {
            display: inline-block;
            opacity: 0;
            filter: blur(4px);
            transform: translateY(10px);
            transition: opacity 0.5s ease, filter 0.5s ease, transform 0.5s ease;
        }

        .word.visible {
            opacity: 1;
            filter: blur(0);
            transform: translateY(0);
        }


        /* Estilos para Stitch */
        .stitch-container {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 230px;
            z-index: 5;
            opacity: 0;
            transition: opacity 1s ease, transform 1s ease;
            pointer-events: none;
        }

        .stitch-container.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .stitch {
            position: relative;
            width: 100%;
            height: 100%;
        }

        /* Cabeza */
        .stitch-head {
            position: absolute;
            width: 120px;
            height: 100px;
            background: #4169E1; /* Azul real */
            border-radius: 50% 50% 40% 40%;
            top: 30px;
            left: 40px;
            z-index: 2;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: breathe 4s ease-in-out infinite;
        }

        /* Cara */
        .stitch-face {
            position: absolute;
            width: 90px;
            height: 80px;
            background: #7B68EE; /* Azul más claro */
            border-radius: 40% 40% 50% 50%;
            top: 40px;
            left: 55px;
            z-index: 3;
        }

        /* Ojos */
        .stitch-eye {
            position: absolute;
            width: 25px;
            height: 30px;
            background: #000;
            border-radius: 50%;
            top: 55px;
            z-index: 4;
        }

        .stitch-eye.left {
            left: 65px;
        }

        .stitch-eye.right {
            left: 105px;
        }

        /* Pupilas */
        .stitch-pupil {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #fff;
            border-radius: 50%;
            top: 5px;
            left: 7px;
            z-index: 5;
            animation: blink 4s infinite;
        }

        /* Nariz */
        .stitch-nose {
            position: absolute;
            width: 18px;
            height: 12px;
            background: #333;
            border-radius: 50%;
            top: 70px;
            left: 90px;
            z-index: 4;
        }

        /* Boca */
        .stitch-mouth {
            position: absolute;
            width: 40px;
            height: 10px;
            border-bottom: 3px solid #333;
            border-radius: 0 0 20px 20px;
            top: 85px;
            left: 80px;
            z-index: 4;
            transition: all 0.3s ease;
        }

        /* Orejas */
        .stitch-ear {
            position: absolute;
            width: 40px;
            height: 60px;
            background: #4169E1;
            border-radius: 50% 50% 0 0;
            z-index: 1;
        }

        .stitch-ear.left {
            top: 0;
            left: 35px;
            transform: rotate(-20deg);
        }

        .stitch-ear.right {
            top: 0;
            right: 35px;
            transform: rotate(20deg);
        }

        /* Cuerpo */
        .stitch-body {
            position: absolute;
            width: 100px;
            height: 90px;
            background: #4169E1;
            border-radius: 40% 40% 50% 50%;
            top: 120px;
            left: 50px;
            z-index: 1;
        }

        /* Brazos */
        .stitch-arm {
            position: absolute;
            width: 25px;
            height: 70px;
            background: #4169E1;
            border-radius: 20px;
            z-index: 0;
            top: 130px;
        }

        .stitch-arm.left {
            left: 30px;
            transform: rotate(20deg);
        }

        .stitch-arm.right {
            right: 30px;
            transform: rotate(-20deg);
        }

        /* Piernas */
        .stitch-leg {
            position: absolute;
            width: 25px;
            height: 40px;
            background: #4169E1;
            border-radius: 0 0 20px 20px;
            bottom: 0;
            z-index: 0;
        }

        .stitch-leg.left {
            left: 55px;
        }

        .stitch-leg.right {
            right: 55px;
        }

        /* Animaciones */
        @keyframes breathe {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.03);
            }
        }

        @keyframes blink {
            0%, 96%, 100% {
                transform: scaleY(1);
                opacity: 1;
            }
            98% {
                transform: scaleY(0.1);
                opacity: 0.1;
            }
        }

        .stitch-container:hover .stitch-mouth {
            height: 15px;
            border-radius: 0 0 50% 50%;
        }

        .stitch-message {
            position: absolute;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border-radius: 20px;
            padding: 10px 15px;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9rem;
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
            width: max-content;
            max-width: 200px;
            text-align: center;
            color: #333;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            pointer-events: none;
        }

        .stitch-message:after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: white transparent transparent;
        }

        .stitch-container:hover .stitch-message {
            opacity: 1;
            transform: translateX(-50%) translateY(-5px);
        }
    </style>
</head>
<body>
<!-- Añadir el elemento de audio aquí -->
    <audio id="backgroundMusic" loop>
        <source src="https://www.dropbox.com/s/zajxvxm7idg45n0/0003.%20Romantic%20Piano%20-%20AShamaluevMusic.mp3?dl=1" type="audio/mpeg">
        <!-- Instrumental suave y emotiva - alternativa al estilo de Caifanes -->
        Tu navegador no soporta el elemento de audio.
    </audio>

    <div class="envelope-button">
    <div class="envelope">
        <div class="envelope-front"></div>
        <div class="envelope-back"></div>
        <div class="letter">Abrir</div>
    </div>
</div>
    <div class="stars" id="stars"></div>
    
    <div class="message-container">
        <div class="message-glow"></div>
        <h1 class="message">Con todo mi cariño para ti</h1>
        <p class="sub-message" id="animatedMessage"></p>
    </div>
    
    <div class="card">
        <div class="container">
            <div class="glass">
                <div class="droplets" id="droplets"></div>
            </div>
            <div class="thorns">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
            <div class="glow"></div>
            <div class="rose-leaves">
                <div></div>
                <div></div>
            </div>
            <div class="rose-petals">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
            <div class="sparkles">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
    </div>
    
    <div class="floating-particle" style="animation-delay: 0s;"></div>
    <div class="floating-particle" style="animation-delay: 5s;"></div>
    <div class="floating-particle" style="animation-delay: 10s;"></div>

    
    <script>
        // Generate stars dynamically
        const stars = document.getElementById('stars');
        const numStars = 200;
        
        for (let i = 0; i < numStars; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            
            // Random position
            const x = Math.random() * 100;
            const y = Math.random() * 100;
            
            // Random duration for twinkling
            const duration = 2 + Math.random() * 3;
            
            star.style.left = `${x}%`;
            star.style.top = `${y}%`;
            star.style.setProperty('--duration', `${duration}s`);
            
            stars.appendChild(star);
        }
        
        // Generate water droplets inside the dome
        const droplets = document.getElementById('droplets');
        const numDroplets = 15;
        
        for (let i = 0; i < numDroplets; i++) {
            const droplet = document.createElement('div');
            droplet.className = 'droplet';
            
            // Random position
            const x = Math.random() * 100;
            
            // Random delay
            const delay = Math.random() * 6;
            
            droplet.style.left = `${x}%`;
            droplet.style.animationDelay = `${delay}s`;
            
            droplets.appendChild(droplet);
        }
        
        // Animated text for message
        const message = `Vale,

        Una vez me dijiste que te gustaba que sean directos contigo, que te den seguridad, que si alguien siente algo, lo diga sin rodeos. Y aunque pensé decírtelo al final del voluntariado… todo se adelantó para mí. Así que aquí va.

        Quiero agradecerte primero. En serio. Gracias. Gracias por haberle dado sentido a mis mañanas estos dos meses. Sinceramente, sin ti, el voluntariado no hubiera sido lo mismo para mí. Ir cada mañana a un área a la cual no me correspondía se volvió más llevadero por tu compañía.

        Tu alegría, tu forma de tratar a los demás, tu energía, tu ternura, me mostraron lo valiosa que eres como persona. Y eso me tocó más de lo que imaginé.

        Me gustó que, sin proponértelo, siempre sacabas una sonrisa de mí. Que en medio de la monotonía aparecías con tus ocurrencias, tus frases tan tuyas, tus indirectas disfrazadas de humor, o ese sarcasmo tierno que te hace única. Me sentía bien contigo, aunque a veces no supiera cómo decírtelo.

        Desde hace un tiempo me importas más de lo que pensé posible. Me gustas, Vale. Y no solo por lo bonita que eres, sino por tu esencia. Muchas veces quise decírtelo, dar ese paso, pero las dudas, las circunstancias… y sí, también el miedo, me frenaban.

        Aun así, ahora siento que es momento de al menos dejarlo salir.

        No sé qué pensarás tú de todo esto, ni espero una respuesta inmediata. Solo quería que lo supieras. Porque antes de seguir caminos distintos, necesitaba decirte, aunque sea en voz bajita, que tú dejaste una huella en mí.`;

        const messageContainer = document.getElementById('animatedMessage');

        const words = message.split(' ');
        let html = '';

        // Palabras clave para resaltar
        const highlightWords = ['energía', 'vida', 'chispa', 'alma', 'responsabilidad', 'fuerza', 'inteligencia', 'universo', 'esencia', 'alegre', 'magia', 'destello', 'único', 'precioso', 'extraordinariamente', 'hermoso'];

        words.forEach((word, index) => {
            // Eliminar puntuación para comparar palabras
            const cleanWord = word.replace(/[.,;:!?]/g, '');
            
            if (highlightWords.includes(cleanWord.toLowerCase())) {
                html += `<span class="highlight-word" style="--word-index: ${index}">${word}</span> `;
            } else {
                html += `<span style="--word-index: ${index}">${word}</span> `;
            }
        });

        messageContainer.innerHTML = html;

        // Añade interactividad a las palabras resaltadas
        const highlightedWords = document.querySelectorAll('.highlight-word');
        highlightedWords.forEach(word => {
            word.addEventListener('mouseenter', () => {
                word.style.color = '#FFD700';
                createHeart(word.getBoundingClientRect().left + word.offsetWidth/2, 
                            word.getBoundingClientRect().top);
            });
            
            word.addEventListener('mouseleave', () => {
                word.style.color = '#ffffff';
            });
        });
        
        // Add 3D effect on scroll/mousemove
        document.addEventListener('mousemove', (e) => {
            const xAxis = (window.innerWidth / 2 - e.pageX) / 25;
            const yAxis = (window.innerHeight / 2 - e.pageY) / 25;
            
            const message = document.querySelector('.message');
            message.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
        });

        // Función para crear corazones al mover el mouse
        document.addEventListener('mousemove', function(e) {
            // Solo crear un corazón cada cierto tiempo para no saturar la pantalla
            if (Math.random() > 0.92) {
                createHeart(e.clientX, e.clientY);
            }
            
            // Efecto 3D para el contenedor de mensajes
            const messageContainer = document.querySelector('.message-container');
            const xAxis = (window.innerWidth / 2 - e.pageX) / 50;
            const yAxis = (window.innerHeight / 2 - e.pageY) / 50;
            
            messageContainer.style.transform = `translateX(-50%) rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
        });

        function createHeart(x, y) {
            const heart = document.createElement('div');
            heart.className = 'heart';
            
            // Símbolos de corazón variados
            const hearts = ['❤️', '💖', '💕', '💗', '💓', '💘'];
            heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
            
            // Posición inicial
            heart.style.left = `${x}px`;
            heart.style.top = `${y}px`;
            
            // Animación variable
            const duration = 2 + Math.random() * 2;
            const rotationAmount = -30 + Math.random() * 60;
            heart.style.animationDuration = `${duration}s`;
            heart.style.transform = `rotate(${rotationAmount}deg)`;
            
            document.body.appendChild(heart);
            
            // Eliminar el corazón después de la animación
            setTimeout(() => {
                heart.remove();
            }, duration * 1000);
        }

        // Función para abrir el sobre y mostrar el mensaje
        // Modificar la función de apertura del sobre para iniciar la animación del texto
    document.querySelector('.envelope-button').addEventListener('click', function() {

        // Reproducir la música de fondo
        const music = document.getElementById('backgroundMusic');
        music.volume = 0.5; // Ajustar volumen al 50%
        music.play()
            .catch(e => console.log("Error reproduciendo audio:", e)); // Manejar posibles errores
        // Animar el sobre para que se abra
        this.querySelector('.envelope').classList.add('envelope-opening');
        
        // Después de un tiempo, mostrar el contenedor del mensaje
        setTimeout(() => {
            const messageContainer = document.querySelector('.message-container');
            messageContainer.style.display = 'block';
            
            // Añadir un pequeño retraso para permitir que el elemento se renderice antes de la animación
            setTimeout(() => {
                messageContainer.style.opacity = '1';
                messageContainer.style.animation = 'showMessage 1.5s forwards';
                
                // Preparar el mensaje
                prepareMessage();
                
                // Iniciar la animación de palabras después de que se muestre el contenedor
                setTimeout(animateWords, 500);
            }, 50);
            
            // Ocultar completamente el sobre después de la animación
            setTimeout(() => {
                document.querySelector('.envelope-button').style.display = 'none';
            }, 1500);
        }, 1000);
    });

    // Función para animar las palabras una por una
function animateWords() {
    // Primero animar el título
    const titleElement = document.querySelector('.message');
    setTimeout(() => {
        titleElement.classList.add('visible');
    }, 500);

    // Luego animar las palabras del mensaje
    const wordElements = document.querySelectorAll('#animatedMessage span');
    
    // Tiempo de espera inicial después de que aparezca el título
    let delay = 1500;
    
    // Intervalo entre palabras
    const wordDelay = 100;
    
    wordElements.forEach((word, index) => {
        setTimeout(() => {
            word.classList.add('visible');
            
            // Si estamos en la última palabra o cerca del final, activar los efectos de partículas
            if (index >= wordElements.length - 5) {
                // Activar efectos adicionales de partículas o brillos
                createExtraParticles();
            }
        }, delay + (index * wordDelay));
    });
}

// Función para crear efectos de partículas extras al finalizar la animación de palabras
function createExtraParticles() {
    // Añadir partículas extra para un efecto final
    for (let i = 0; i < 10; i++) {
        setTimeout(() => {
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight;
            createHeart(x, y);
        }, i * 300);
    }
}

// Modificar la función que maneja el clic en el sobre
document.querySelector('.envelope-button').addEventListener('click', function() {
    // Animar el sobre para que se abra
    this.querySelector('.envelope').classList.add('envelope-opening');
    
    // Después de un tiempo, mostrar el contenedor del mensaje
    setTimeout(() => {
        const messageContainer = document.querySelector('.message-container');
        messageContainer.style.display = 'block';
        
        // Añadir un pequeño retraso para permitir que el elemento se renderice antes de la animación
        setTimeout(() => {
            messageContainer.style.opacity = '1';
            
            // Iniciar la animación de palabras
            animateWords();
        }, 50);
        
        // Ocultar completamente el sobre después de la animación
        setTimeout(() => {
            document.querySelector('.envelope-button').style.display = 'none';
        }, 1500);
    }, 1000);
});

        // Modificar la función que genera el contenido del mensaje
            function setupAnimatedText() {
                const message = `Vale,

        Una vez me dijiste que te gustaba que sean directos contigo, que te den seguridad, que si alguien siente algo, lo diga sin rodeos. Y aunque pensé decírtelo al final del voluntariado… todo se adelantó para mí. Así que aquí va.

        Quiero agradecerte primero. En serio. Gracias. Gracias por haberle dado sentido a mis mañanas estos dos meses. Sinceramente, sin ti, el voluntariado no hubiera sido lo mismo para mí. Ir cada mañana a un área a la cual no me correspondía se volvió más llevadero por tu compañía.

        Tu alegría, tu forma de tratar a los demás, tu energía, tu ternura, me mostraron lo valiosa que eres como persona. Y eso me tocó más de lo que imaginé.

        Me gustó que, sin proponértelo, siempre sacabas una sonrisa de mí. Que en medio de la monotonía aparecías con tus ocurrencias, tus frases tan tuyas, tus indirectas disfrazadas de humor, o ese sarcasmo tierno que te hace única. Me sentía bien contigo, aunque a veces no supiera cómo decírtelo.

        Desde hace un tiempo me importas más de lo que pensé posible. Me gustas, Vale. Y no solo por lo bonita que eres, sino por tu esencia. Muchas veces quise decírtelo, dar ese paso, pero las dudas, las circunstancias… y sí, también el miedo, me frenaban.

        Aun así, ahora siento que es momento de al menos dejarlo salir.

        No sé qué pensarás tú de todo esto, ni espero una respuesta inmediata. Solo quería que lo supieras. Porque antes de seguir caminos distintos, necesitaba decirte, aunque sea en voz bajita, que tú dejaste una huella en mí.`;
                
                const messageContainer = document.getElementById('animatedMessage');
                
                // Dividir por párrafos primero
                const paragraphs = message.split('\n\n');
                let html = '';

                // Palabras clave más emotivas y destacadas del texto
                const highlightWords = ['agradecerte', 'gracias', 'sentido', 'alegría', 'energía', 'ternura', 'valiosa', 'tocó', 'sonrisa', 'única', 'bien', 'importas', 'gustas', 'bonita', 'esencia', 'miedo', 'siento', 'huella'];

                paragraphs.forEach((paragraph, paragraphIndex) => {
                    if (paragraph.trim()) { // Solo procesar párrafos no vacíos
                        const words = paragraph.trim().split(' ');
                        
                        words.forEach((word, wordIndex) => {
                            // Eliminar puntuación para comparar palabras
                            const cleanWord = word.replace(/[.,;:!?]/g, '');
                            
                            if (highlightWords.includes(cleanWord.toLowerCase())) {
                                html += `<span class="highlight-word">${word}</span> `;
                            } else {
                                html += `<span class="word">${word}</span> `;
                            }
                        });
                        
                        // Agregar salto de línea después de cada párrafo (excepto el último)
                        if (paragraphIndex < paragraphs.length - 1) {
                            html += '<br><br>';
                        }
                    }
                });

                messageContainer.innerHTML = html;

                // Añade interactividad a las palabras resaltadas
                const highlightedWords = document.querySelectorAll('.highlight-word');
                highlightedWords.forEach(word => {
                    word.addEventListener('mouseenter', () => {
                        word.style.color = '#FFD700';
                        createHeart(word.getBoundingClientRect().left + word.offsetWidth/2, 
                                    word.getBoundingClientRect().top);
                    });
                    
                    word.addEventListener('mouseleave', () => {
                        word.style.color = '#ffffff';
                    });
                });
            }

        // Llamar a esta función cuando el documento esté listo
        document.addEventListener('DOMContentLoaded', setupAnimatedText);
    </script>
</body>
</html>